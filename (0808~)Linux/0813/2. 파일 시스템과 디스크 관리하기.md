

## 파일 시스템과 디스크 관리하기**

### 리눅스 파일 시스템의 종류

- 파일 시스템 : 파일과 디렉터리의 집합을 구조적으로 관리하는 체계

#### **리눅스** **고유의 디스크 기반 파일** **시스템**

- ext(ext1)
  - Extended File System’의 약자로  1992년 4월 리눅스 0.96c에 포함되어 발표
  - 파일 시스템의 최대 크기는 2GB, 파일 이름의 길이는 255바이트까지 지원
  - inode 수정과 데이터의 수정 시간 지원이 안 되고, 파일 시스템이 복잡해지고 파편화되는 문제
  - 현재 리눅스에서는 ext 파일 시스템을 사용하지 않음
- ext2
  - ext 파일 시스템이 가지고 있던 문제를 해결하고, 1993년 1월 발표
  - ext2는 ext3 파일 시스템이 도입되기 전까지 사실상 리눅스의 표준 파일 시스템으로 사용
  - 이론적으로 32TB까지 가능
- ext3
  - ext3는 ext2를 기반으로 개발되어 호환이 가능하며 2001년 11월 공개
  - ext3의 가장 큰 장점은 저널링(journaling) (기록개념) 기능을 도입 복구기능 강화
  -  파일 시스템의 최대 크기는 블록의 크기에 따라 2~32TB까지 지원

- ext4
  - ext4 파일 시스템은 1EB(엑사바이트, 1EB=1,024×1,024TB) 이상의 볼륨과 16TB 이상의 파일을 지원
  - ext2 및 ext3와 호환성을 유지하며 2008년 12월 발표
- XFS
  - eXtended File System의 약자
  - 1993년 실리콘그래픽스가 개발한 고성능 저널링 파일 시스템. 2000년 5월 GNU GPL로 공개
  - 2001년 리눅스에 이식되었고 현재 대부분의 리눅스 배포판에서 지원
  - XFS는 64bit 파일 시스템으로 최대 16EB까지 지원

#### 리눅스의 모든 파일 시스템의 기본 개념

- 파일은 inode로 관리된다.
- 디렉터리는 단순히 파일의 목록을 가지고 있는 파일일 뿐이다.
- 특수 파일을 통해 장치에 접근할 수 있다.

#### ext4 파일 시스템의 구조

- 효율적으로 디스크를 사용하기 위해 저장 장치를 논리적인 블록의 집합(블록 그룹)으로 구분
- 일반적으로 블록은 4KB이고 실제 크기는 시스템의 설정에 따라 변경 가능
- 블록 그룹 유형
  - 블록 그룹 0 : 파일 시스템의 첫 번째 블록 그룹으로 특별하게 그룹 0 패딩과 슈퍼블록, 그룹 디스크립터를 가지고 있다. 
  - 블록 그룹 a : 파일 시스템에서 첫 번째 블록 그룹이 아닌 블록 그룹으로 그룹 0 패딩이 없으나 슈퍼블록과 그룹 디스크립터에 대한 복사본을 가지고 있다.  
  - 블록 그룹 b : 파일 시스템에서 첫 번째 블록 그룹이 아닌 블록 그룹으로 그룹 0 패딩, 슈퍼블록, 그룹 디스크립터가 없고 바로 데이터 블록 비트맵으로 시작한다.

![inode 구조](https://user-images.githubusercontent.com/50945713/62908850-19bc1e80-bdb5-11e9-8a45-e17c9425ff6d.png)



- 파일 시스템과 디렉터리 계층 구조
  - 디렉터리 계층 구조는 리눅스의 전체 파일과 디렉터리를 어떤 구조로 정리하고 관리할 것인지를 정의한 것
  - 실제 파일이 저장되어 있는 파일 시스템은 디렉터리 계층 구조에 연결되어야 사용자가 접근 가능
- 한 파일 시스템으로 구성하기
  - 디렉터리 계층 구조에서 보이는 모든 디렉터리와 파일을 하나의 파일 시스템으로 구성

- 여러 파일 시스템으로 구성하기
  - 디렉터리 계층 구조를 여러 파일 시스템으로 
     구분하여 구성
  - 여러 파일 시스템으로 나누어 디렉터리 계층 구조를 구성할 경우, 일부 파일 시스템에 문제가 
       생기더라도 다른 파일 시스템의 파일은 안전





### 파일 시스템 마운트

- 마운트
  - 파일 시스템을 디렉터리 계층 구조의 특정 디렉터리와 연결하는 것

- 마운트 포인트
  - 디렉터리 계층 구조에서 파일 시스템이 연결되는 디렉터리를 마운트 포인트

- 파일 시스템 마운트 설정 파일
  - 리눅스에서 시스템이 부팅될 때 자동으로 파일 시스템이 마운트되게 하려면 /etc/fstab 파일에 설정
  - /etc/fstab 파일의 기능: 파일 시스템의 마운트 설정 정보 저장

#### /etc/fstab 파일의 구조

- /etc/fstab 파일의 예
  - 장치명 : UUID=7009cb18-dbd5-4ffc-af86-599cee765454
  - 마운트 포인트 : /
    파일 시스템의 종류 : ext4 
  - 옵션 : errors=remount-ro
  - 덤프 관련 설정 : 1
  - 파일 점검 옵션 : 1 

- UUID는  ‘universally unique identifier’의 약자로 로컬 시스템과 다른 시스템에서 파일 시스템을 유일하게 구분해주는 128비트의 숫자
  - UUID는 시스템의 하드웨어 정보와 시간 정보를 조합하여 랜덤으로 생성
  - UUID로 지정된 장치는 /dev/disk/by-uuid 디렉터리에서 찾을 수 있음

![etc_fstab](https://user-images.githubusercontent.com/50945713/62908951-74ee1100-bdb5-11e9-9908-a4f1243eb76f.png)

**마운트** **관련 명령**

