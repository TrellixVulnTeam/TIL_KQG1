# 빅데이터 저장 기술

-  신뢰성 있고, 확장성 있는 분산 컴퓨팅을 위한 오픈소스 프레임워크
-  간단한 프로그래밍 모델을 사용하여 대용량 데이터의 분산 처리를 할 수 있는 프레임워크
-  GFS, MapReduce 소프트웨어구현체
  - ​    \- 아파치Top-Level 프로젝트
  - ​    \- 코어는 Java, C/C++, Python 등 지원
-  대용량 데이터 처리를 위한 플랫폼
  - ​    \- 분산파일시스템(HDFS)
  - ​    \- 분산병렬처리시스템(MapReduce)
  - ​    \- 기반소프트웨어프레임워크(Core)

## 빅데이터 기술의 이해

### 빅데이터 저장 기술

- 신뢰성 있고, 확장성 있는 분산 컴퓨팅을 위한 오픈소스 프레임워크

- 간단한 프로그래밍 모델을 사용하여 대용량 데이터의 분산 처리를 할 수 있는 프레임워크

- GFS, MapReduce 소프트웨어구현체
  - 아파치Top-Level 프로젝트
  - 코어는 Java, C/C++, Python 등 지원

- 대용량 데이터 처리를 위한 플랫폼
  - 분산파일시스템(HDFS)
  - 분산병렬처리시스템(MapReduce)
  -  기반소프트웨어프레임워크(Core)

### GFS 개발 배경

- 저가형 서버로 구성된 환경  -> 서버의 고장이 빈번히 발생 가능 (장애 허용 이유)
- 파일은 대용량 파일을 가정  -> 대용량 파일을 효과적으로 관리할 수 있는 방법이 요구
- 작업 부하는 주로 연속적으로 많은 데이터를 읽는 연산이거나 임의의 영역에서 적은 데이터를 읽는 연산으로 구성
- 파일에 대한 쓰기 연산은 주로 순차적으로 데이터를 추가하는 연산이며 파일에 대한 수정은 드물게 이루어짐
- 동시에 동일한 파일에 데이터를 추가하는 환경에서 동기화 오버헤드를 최소화할 수 있는 방법이 요구.
- 낮은 응답 지연 시간보다 높은 처리율이 좀 더 중요.

###  GFS 특징

- 파일은 Chunk 단위(64MB)로 저장
- 기본 3군데(3개의 node) 이상 저장을 통한 신뢰성 확보
  - 마스터 노드 - slave 노드로 구성
- 단일 마스터를 통한 접근 제어 및 메타 데이터의 중앙 관리
- 대용량 데이터 집합과 스트리밍 읽기에 따른 가시 기능 삭제
- 단순하고 친숙한 인터페이스와 API 커스터마이징 제공

### Hadoop 모듈

- Hadoop Common
  : 다른 하둡 모듈을 지원하는 유틸리티
- HDFS
  : 어플리케이션 데이터에 고성능 접근을 지원하는 분산 파일 시스템
- HBase
  : 분산 데이터베이스
- Hadoop Yarn
  : <u>잡 스케줄링</u>과 <u>클러스터 리소스 관리</u> 를 위한 프레임 워크
- Hadoop MapReduce
  : 대용량 데이터의 병렬처리를 위한 얀 기반 시스템

###  Hadoop 파일 시스템의 장/단점

-  특징 및 장점
  - 선형적인 확장성 제공
  - 스토리지용량 증설을 위해서는 스토리지로 사용할 리눅스 장비를 추가하고 Hadoop의 데이터 노드만 실행해 주면 Hadoop
    파일 시스템에서 자동으로 인식합니다.
- 글로벌 네임스페이스 제공
    - 파일에 대한 유일한 식별 단위를 가질 수 있습니다.
      글로벌 네임스페이스를 이용하면 시스템 간의 파일 데이터에 대한 중복 저장 등 파일 공유 등의 문제를 쉽게 해결할 수있습니다
- 비용절감
  - 전체 처리 용량 증가
    - 분산된 서버의 디스크를 이용하기 때문에 네트 워크, 디스크 I/O 등이 각 서버로 분산됩니다. 따라서 동일한 용량의 스토리지 솔루션을 구축할 경우 전체 처리 용량은 증가합니다.
  - 데이터분석 처리에 활용
    - 분석용데이터를 Hadoop 파일 시스템에 저장하고 맵리듀스라는 분산/병렬 처리 프레임워크를 이용해 빠르게 분석하는 데 주로 활용 중입니다
-  단점
   -  응용 프로그램 기반의 파일 시스템
      -  응응 프로그램으로 구성된 파일 시스템으로 마운팅 기능 제공하지 않으며, ls, copy, rm등과 같은 파일 처리 명령을 이용할 수 없습니다.
   -  불변 파일만 저장
      -  Hadoop 분산 파일 시스템은 파일을 저장하고 저장된 파일에 대해 스트리밍 방식의 읽기 요청 위주인 응용이나 배치 작업 등에 적합합니다
   -  네임스페이스 관리를 네임 노드 메모리에 저장
      -  Hadoop에 저장할 수 있는 파일 과 디렉토리의 개수는 네임 노드의 메모리 크기에 제한을 받습니다.
   -  네임 노드 이중화 문제
      -  네임노드가 SPOF(Single Point Of Failure) 입니다. 즉, 일부 데이터 노드에 장애가 발생해도 파일은 안정적으로 서비스할 수 있지만 네임 노드에 문제가 발생하면 파일 시스템 전체 클러스터에 장애가 발생합니다

###  Hadoop 설계 목표

- 장애복구
  - 복제 데이터 저장
  - 주기적인 상태 체크

- 스트리밍 방식의 데이터 접근
  - 높은 데이터 처리량에 중점을 두고 있음

- 대용량 데이터 저장
  - 하나의 파일이 테라바이트 이상 저장 가능
  - 하나의 인스턴스에서 수백만 개 이상의 파일 지원

-  데이터 무결성
  - 읽기 전용

  - 파일 이동, 삭제, 복사 인터페이스 제공

![hadooarch](https://user-images.githubusercontent.com/50945713/62922995-b992a000-bde7-11e9-8c20-32e3fd106f06.png)



 ### HDFS(Hadoop Distributed File System)

- 파일의 분산 저장이 목적

- Namenodes와 Datanodes로 구성

  - Master Namenode
  - Secondary Namenode

  - Datanode

- 저렴한 컴퓨터로 대 용량 데이터를 저장할 수 있는 시스템
  - 네트워크 Raid와 같이 연결된 것 처럼 사용하는 하드디스크
  - Scale Out

-  Block(Chunk) 단위로 파일관리 (저장/복제/삭제)
  - Default Size는 64M

-  복제기능을 통해 안전성/신뢰성을 보장

-  1대의 Master서버에 4000+이상의 Datanodes를 운영할 수 있음.

- API지원
  - 하둡 코어는 Python, Java, C/C++

### Apach Hadoop이 대용량 처리에 적합한 이유 

1. 대용량 파일을 저장할 수 있는 분산 파일 시스템을 제공하기 때문
   - 어플리케이션/트랜잭션 로그 정보는 매우 크다 
2. 멀티 노드로 부하를 분산시켜 처리하기 때문
   - I/o 집중적이면서 CPU도 많이 사용
3. 장비를 증가시킬수록 성능이 linear에 가깝게 향상된다
   - 데이터베이스는 하드웨어 추가시 성능 향상이 linear하지 않다
4. hadoop은 무료, Intel Core머신과 리눅스는 싸다

### 빅데이터 S/W

![빅데이터 sw](https://user-images.githubusercontent.com/50945713/63639665-15ef9c80-c6d1-11e9-985a-c75a0909ec77.png)

### procedure

![procedure](https://user-images.githubusercontent.com/50945713/63639677-56e7b100-c6d1-11e9-96c0-f9c81de62b50.png)

### Hadoop동작 모드

- 로컬모드
  : 한 대의 서버상에 HDFS를 사용하지 안혹 MapReduce동작 환경을 구축한다.
  HDFS를 사용하지 않기 때문에 NameNode프로세스, DataNode프로세스로도 동작하지 않음. 
  단일 자바 프로세스로 실행되기 때문에 JobTracker프로세스, TaskTracker프로세스 모두 동작하지 않음
  MapReduce동작만 검증
- 유사 분산 모드
  : 한대의 서버 상에 HDFS를 사용한 MapReduce동작 환경 구축
  NameNode프로세스, DataNode프로세스 모두 한대의 서버상에서 동작
  JobTracker프로세스, Task Tracker프로세스 모두 한대의 서버상에서 동작
  HDFS/MapReduce 동작 검증, Hadoop어플리케이션 기능 검증
- 완전 분산 모드
  : 여러대의 서버상에 HDFS를 사용한 MapReduce 동작환경 구축
  상용환경 구축, 노드 간 통신을 포함한 HDFS/MapReduce동작 검증, 성능 등의 비기능 요건을 포함한 애플리케이션 검증